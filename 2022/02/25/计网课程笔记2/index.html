<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>计网课程笔记2 |  Welcome to DanielQi&#39;s Blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <script src="https://mermaid-js.github.io/mermaid/"></script>
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-计网课程笔记2"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  计网课程笔记2
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/02/25/%E8%AE%A1%E7%BD%91%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B02/" class="article-date">
  <time datetime="2022-02-25T11:20:26.000Z" itemprop="datePublished">2022-02-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0-%E8%AE%A1%E7%BD%91/">课程笔记_计网</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">6.1k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">21 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gu411D7QB?p=40">课程链接</a><br>本文仅供个人预习和知识点记录<del>你这不就是抄了一遍PPT吗</del>用。</p>
<hr>
<h1 id="依照学校教学安排，第二章为应用层（即网课第六章）"><a href="#依照学校教学安排，第二章为应用层（即网课第六章）" class="headerlink" title="依照学校教学安排，第二章为应用层（即网课第六章）"></a>依照学校教学安排，第二章为应用层（即网课第六章）</h1><h1 id="应用层协议的特点"><a href="#应用层协议的特点" class="headerlink" title="应用层协议的特点"></a>应用层协议的特点</h1><p>每个应用层协议都是为了解决某一类应用问题，而问题的解决是通过位于不同主机中的多个应用之间的通信和协同工作来完成的，应用层的具体内容就是规定应用进程在通信时所遵循的协议。<br><strong>应用层的许多协议都是基于客户服务器方式</strong>，客户和服务器均为通信中所涉及的两个<strong>应用进程</strong>，客户服务器方式描述的是<strong>进程之间服务与被服务的关系</strong></p>
<h1 id="2-1-域名系统DNS"><a href="#2-1-域名系统DNS" class="headerlink" title="2.1 域名系统DNS"></a>2.1 域名系统DNS</h1><h2 id="2-1-1-什么是DNS"><a href="#2-1-1-什么是DNS" class="headerlink" title="2.1.1 什么是DNS"></a>2.1.1 什么是DNS</h2><ul>
<li><strong>域名系统</strong>：是互联网的一项服务，它是<strong>将域名和IP地址相互映射的一个分布式数据库</strong>，使人更容易地访问互联网、记忆网址</li>
<li>互联网采用层次结构的命名树作为主机的名字</li>
<li><strong>域名服务器</strong>：运行<strong>名字到IP地址的解析程序</strong>的机器，域名服务器程序在专设的结点上运行<h2 id="2-1-2-互联网的域名结构"><a href="#2-1-2-互联网的域名结构" class="headerlink" title="2.1.2 互联网的域名结构"></a>2.1.2 互联网的域名结构</h2></li>
<li>互联网采用层次树状结构的命名方法</li>
<li>任何一个连接在互联网上的主机或路由器，都有一个唯一的层次结构的名字，即<strong>域名</strong></li>
<li>域名的结构由标号序列组成，各标号之间用点隔开</li>
<li><strong>标号最长63个字符（不包含相隔的点），域名最长253个字符</strong></li>
</ul>
<p>例如：<a href="http://www.baidu.com，从左到右依次为：三级域名、二级域名、顶级域名，等级从低到高，有几段标号，www就是几级域名">www.baidu.com，从左到右依次为：三级域名、二级域名、顶级域名，等级从低到高，有几段标号，www就是几级域名</a></p>
<h3 id="顶级域名TLD"><a href="#顶级域名TLD" class="headerlink" title="顶级域名TLD"></a>顶级域名TLD</h3><ul>
<li>国家顶级域名nTLD:.cn/.us/.ru…</li>
<li>通用顶级域名gTLD:.gov（政府）/.edu（教育机构）/.org（非营利性组织）/.mil（军事部门）/.net（网络服务机构）/.int（国际组织）/.com或.biz（公司和企业）/.jobs（人力企业）/.coop（合作团体）/.aero（航空公司）/.pro（持有证书的专业人员）/.name（个人）/.museum（博物馆）…<strong>当.edu/.gov/.mil是顶级域名时，则域名均为美国专用，其他国家需要添加国家顶级域名</strong> <h2 id="2-1-3-域名服务器"><a href="#2-1-3-域名服务器" class="headerlink" title="2.1.3 域名服务器"></a>2.1.3 域名服务器</h2></li>
</ul>
<p><strong>既然域名系统是一个数据库，那么它放在哪里？</strong></p>
<ul>
<li><strong>区</strong>：一个服务器所负责管辖（或有权限的）范围</li>
<li>各单位根据具体情况来划分自己管辖范围的区，但在一个区内的所有节点必须是能够连通的</li>
<li>每一个区内所有主机的域名到IP地址的映射均存放在该区的<strong>权限域名服务器</strong>内</li>
<li>DNS服务器的管辖范围不以“域”为单位，而是以“区”为单位</li>
<li>找到域名对应的IP地址首先要找到<strong>根域名服务器</strong>，然后找其下的<strong>顶级域名服务器</strong>逐级往下直到找到域名</li>
<li><strong>根域名服务器共有13套装置，不是13个机器</strong>，这些装置对应的域名为从a.rootservers.net到m.rootservers.net，其中一套为<strong>主根服务器</strong>，其余12套为<strong>辅根服务器</strong>，截止到2016年2月，全世界已经在588个地点安装了根域名服务器 （有1000台以上的服务器）<em>（为了让世界上大部分DNS域名服务器都能就近找到一个域名服务器）</em>，所以<strong>根域名服务器不是13个机器，一套装置就是一个根服务器集群</strong>，访问根服务器的域名需要32个字节</li>
<li><strong>在IPV4下，为了在大多数的网络上进行传输，一个DNS数据包的大小规定小于等于512个字节</strong>，传输时在这个数据包的基础上还要加上8个字节大小的UDP头部，20个字节大小的IP，一定字节大小的数据链路层头部等等</li>
<li><strong>为什么根域名服务器只有13个</strong>:存放一个根域名服务器的域名需要32字节，而一个DNS数据包的大小规定小于等于512个字节，其中包含了13台根服务器的域名共416字节，为了省出足够空间存放其他参数，因此目前只有13台根服务器</li>
<li>根域名服务器不直接把域名转换成IP地址，在使用迭代查询时，根域名服务器把下一步应当找的顶级域名服务器的IP地址告诉本地域名服务器</li>
<li><strong>顶级域名服务器</strong>：负责管理在该顶级域名服务器注册的所有二级域名，当收到DNS查询请求时，就给出相应的回答 <em>（可能是最后的结果，也可能是下一步应当找的域名服务器的IP地址）</em></li>
<li><strong>分区域名服务器</strong>：负责一个区的域名服务器，当一个权限域名服务器还不能给出最后的查询回答时，就会告诉发出查询请求的DNS客户下一步应当找哪一个权限域名服务器</li>
<li><strong>本地域名服务器</strong>：当一个主机发出DNS查询请求时，这个查询请求报文就将发送给本地域名服务器，每一个互联网服务提供者ISP都可以拥有一个本地域名服务器，这种域名服务器也称为<strong>默认域名服务器</strong></li>
<li><strong>本地域名服务器采用迭代查询</strong>：当一个主机发出DNS查询请求时，这个请求将最先送到本地域名服务器，<strong>如果这个域名和对应的IP在服务器内没有存储或IP已经过期</strong>则本地域名服务器首先询问根域名服务器，获得顶级域名服务器IP，本地域名服务器再根据得到的IP询问顶级域名服务器，获得权限域名服务器IP，再根据得到的IP逐级向下询问次级权限域名服务器，直到获得完整的IP，本地域名服务器将域名和IP进行存储，最后将IP传给主机，完成查询。<strong>如果这个域名和对应的IP在服务器内存在或有效</strong>则本地域名服务器将存储的IP发送给主机，结束查询。</li>
<li><strong>本地域名服务器采用递归查询（少用）</strong>：<strong>如果这个域名和对应的IP在服务器内没有存储或IP已经过期</strong>，则本地域名服务器首先询问根域名服务器，根域名服务器再询问顶级域名服务器，顶级域名服务器再询问权限域名服务器，权限域名服务器逐级向下询问直到所有标号序列均查询完毕，询问顺序中最后一个权限域名服务器将完整的IP逐级返回到上一级域名服务器，根域名服务器将IP返回给本地域名服务器，本地域名服务器将域名和IP进行存储，最后将IP传给主机，完成查询。<strong>如果这个域名和对应的IP在服务器内存在或有效</strong>则本地域名服务器将存储的IP发送给主机，结束查询。由于根服务器是公共资源，我们希望根服务器的资源利用最大化，因此查询常常只发生在主机和本地域名服务器之间。</li>
<li>名字的高速缓存：<strong>每个域名服务器都维护一个高速缓存</strong>，存放最近用过的名字以及从何处获得名字映射信息的记录，这么做可以大大减轻根域名服务器的负荷，使互联网上的DNS查询请求和回答报文的数量大为减少。为了保持高速缓存中的内容正确，域名服务器应该为每项内容设置计时器，并处理超过合理时间的项。<strong>当权限域名服务器回答一个查询请求时，在响应中都指明绑定有效存在的时间值，增加此时间值可以减少网络开销，减少此时间值可以提高域名转换的准确性</strong></li>
</ul>
<hr>
<h1 id="2-2-文件传送协议"><a href="#2-2-文件传送协议" class="headerlink" title="2.2 文件传送协议"></a>2.2 文件传送协议</h1><h2 id="2-2-1-文件传送协议-File-Transfer-Protocol-FTP-概述"><a href="#2-2-1-文件传送协议-File-Transfer-Protocol-FTP-概述" class="headerlink" title="2.2.1 文件传送协议(File Transfer Protocol,FTP)概述"></a>2.2.1 文件传送协议(File Transfer Protocol,FTP)概述</h2><ul>
<li>FTP是互联网上使用最广泛的文件传送协议，有两种传输方式：<strong>ASCII传输</strong>和<strong>bit传输</strong></li>
<li>FTP提供交互式的访问，允许客户指明文件的类型和格式，并允许文件具有存取权限</li>
<li>FTP屏蔽了各计算机系统的细节，因而适用于在异构网络中任意计算机之间传送文件</li>
<li>RFC959很早就成为了互联网的正式标准</li>
</ul>
<h2 id="2-2-2-FTP的基本工作原理"><a href="#2-2-2-FTP的基本工作原理" class="headerlink" title="2.2.2 FTP的基本工作原理"></a>2.2.2 FTP的基本工作原理</h2><ul>
<li>文件传送协议FTP只借助TCP可靠的运输服务提供文件传送的一些基本服务</li>
<li>FTP的主要功能是减少或消除在不同操作系统下处理文件的不兼容性</li>
<li>FTP使用<strong>客户-服务器</strong>工作方式，一个FTP服务器进程可同时为多个客户进程提供服务。FTP的服务器进程由<strong>一个主进程和若干个从属进程两大部分</strong>组成，主进程负责接受新的请求，从属进程负责处理单个请求</li>
</ul>
<h3 id="主进程的工作步骤"><a href="#主进程的工作步骤" class="headerlink" title="主进程的工作步骤"></a>主进程的工作步骤</h3><ul>
<li>打开熟知端口（端口号为21），使客户进程能够连接上</li>
<li>等待客户进程发出连接请求</li>
<li>启动从属进程来处理客户进程发来的请求，从属进程对客户进程的请求处理完毕后即终止，但从属进程在运行期间根据需要还可能创建其它一些子进程</li>
<li>回到等待状态，继续接受其他客户进程发来的请求，主进程与从属进程的处理是<strong>并发</strong>地进行</li>
</ul>
<h3 id="控制连接和数据连接"><a href="#控制连接和数据连接" class="headerlink" title="控制连接和数据连接"></a>控制连接和数据连接</h3><ul>
<li>控制连接在整个会话期间一直保持打开，FTP客户发出的传送请求通过控制连接发送给服务器端的控制进程，但控制连接不用来传送文件</li>
<li>连接建立后，通过20号端口来进行数据连接（21号端口仍然打开），用于传输文件。服务器端的控制进程在接收到FTP客户发送来的文件传输请求后就创建<strong>数据传送进程</strong>和<strong>数据连接</strong>，用来连接客户端和服务器端的数据传送进程</li>
<li>数据传送进程实际完成文件的传送，在传送完毕后关闭数据传送连接并结束运行</li>
<li>当客户进程向服务器进程发出建立连接请求时，要寻找连接服务器进程的<strong>熟知端口（21）</strong>，同时还要高速服务器进程自己的另一个端口号码用于数据传送连接，之后服务器用自己传送数据的<strong>熟知端口（20）</strong>与客户进程所提供的端口号码建立数据传送连接</li>
<li>使用两个不同端口号的好处<ul>
<li>使协议更加简单和更容易实现</li>
<li>在传输文件时还可以利用控制连接来控制传输文件进程。</li>
</ul>
</li>
</ul>
<h3 id="网络文件系统-Network-File-System，NFS-的思路"><a href="#网络文件系统-Network-File-System，NFS-的思路" class="headerlink" title="网络文件系统(Network File System，NFS)的思路"></a>网络文件系统(Network File System，NFS)的思路</h3><ul>
<li>NFS允许应用进程打开一个远地文件，并能在该文件的某一个特定的位置上开始读写数据</li>
<li>NFS可使用户只复制一个大文件中的一个很小的片段，而不需要复制整个大文件，NFS软件把需要添加的数据和写数据请求一起发送到远地计算机的NFS服务器，NFS服务器更新文件后返回应答信息 <em>（比如git bash）</em></li>
<li><strong>NFS在网络上传送的只是少量的修改数据</strong></li>
</ul>
<h2 id="2-2-3-简单文件传送协议-Trival-File-Transfer-Protocal-TFTP"><a href="#2-2-3-简单文件传送协议-Trival-File-Transfer-Protocal-TFTP" class="headerlink" title="2.2.3 简单文件传送协议(Trival File Transfer Protocal,TFTP)"></a>2.2.3 简单文件传送协议(Trival File Transfer Protocal,TFTP)</h2><ul>
<li>TFTP是一个很小且易于实现的文件传送协议</li>
<li>TFTP使用客户服务器方式和使用UDP <em>（无连接运输）</em>数据报，因此TFTP需要有自己的差错改正措施</li>
<li>TFTP<strong>只支持文件传输</strong>而不支持交互</li>
<li>TFTP没有一个庞大的命令集，没有列目录的功能，也不能对用户进行身份鉴别</li>
</ul>
<hr>
<h1 id="2-3-远程终端协议TELNET（课程略）"><a href="#2-3-远程终端协议TELNET（课程略）" class="headerlink" title="2.3 远程终端协议TELNET（课程略）"></a>2.3 远程终端协议TELNET（课程略）</h1><hr>
<h1 id="2-4-万维网WWW"><a href="#2-4-万维网WWW" class="headerlink" title="2.4 万维网WWW"></a>2.4 万维网WWW</h1><hr>
<h1 id="2-5-电子邮件"><a href="#2-5-电子邮件" class="headerlink" title="2.5 电子邮件"></a>2.5 电子邮件</h1><h2 id="2-5-1电子邮件概述"><a href="#2-5-1电子邮件概述" class="headerlink" title="2.5.1电子邮件概述"></a>2.5.1电子邮件概述</h2><ul>
<li>电子邮件的传送方式是将邮件发送到收件人使用的邮件服务器并放在其中的收件人邮箱中，收件人可随时上网到自己使用的邮件服务器进行读取，是一种<strong>非即时</strong>的通信方式。</li>
<li>电子邮件具有<strong>方便、传递迅速、费用低廉的优点</strong></li>
<li>电子邮件的标准：<strong>发送邮件SMTP</strong>、<strong>读取邮件POP3和IMAP</strong>、<strong>同时传送多种类型数据MIME</strong></li>
<li>电子邮件的传送过程:发件人以SMTP标准借助TCP可靠的运输服务向发送方邮件服务器的25号端口传送邮件，发送方邮件服务器以SMTP标准借助TCP向接收方邮件服务器发送邮件，接收方邮件服务器以POP3/IMAP标准读取邮件，收件人以POP3/IMAP标准从接收方邮件服务器读取邮件 <strong>（POP3服务器和POP3客户之间的通信是由POP3客户发起的）</strong><br><img src="../photos/ComputerNetworkCourse/2_1.png" title="电子邮件发送-接收示意图"></li>
<li>用户代理(User Agent,UA)：用户与电子邮件系统的接口，是电子邮件客户端软件，功能是<strong>撰写、显示、处理和通信</strong>，邮件服务器的功能是发送和接收邮件，同时还要向发信人报告邮件传送的情况</li>
<li>TCP/IP体系的电子邮件系统规定电子邮件地址的格式：收件人邮箱名@邮箱所在主机的域名</li>
</ul>
<h2 id="2-5-2简单邮件传送协议SMTP"><a href="#2-5-2简单邮件传送协议SMTP" class="headerlink" title="2.5.2简单邮件传送协议SMTP"></a>2.5.2简单邮件传送协议SMTP</h2><ul>
<li>SMTP所规定的就是在两个相互通信的SMTP进程之间如何交换信息</li>
<li>由于SMTP使用<strong>客户-服务器</strong>工作方式，因此负责发送邮件的SMTP进程就是SMTP客户，而负责接收邮件的SMTP进程就是SMTP服务器</li>
<li><strong>SMTP通信的3个阶段</strong>：<strong>连接建立——邮件传送——连接释放</strong>（在发送主机的SMTP客户和负责接收的SMTP服务器之间建立连接，邮件发送完毕后，SMTP应释放TCP连接）<strong>SMTP不使用中间的邮件服务器</strong></li>
<li>缺陷：不能传送可执行文件或其他的二进制对象，仅限于传送7位的ASCII码，这意味着许多非英语国家的文字无法传送，SMTP服务器会拒收超过一定长度的邮件</li>
</ul>
<h2 id="2-5-3电子邮件的信息格式"><a href="#2-5-3电子邮件的信息格式" class="headerlink" title="2.5.3电子邮件的信息格式"></a>2.5.3电子邮件的信息格式</h2><ul>
<li>电子邮件的组成：<strong>信封和内容</strong></li>
<li>RFC822只规定了邮件内容中的首部格式，而对邮件的主体部分则让用户自由撰写，用户写好首部后，邮件系统将自动将信封所需的信息提取出来并写在信封上，无需用户填写，邮件内容首部包括一些关键字，后面加上冒号，最重要的关键字是<strong>To（后面填入收件人的电子邮件地址）、Subject（邮件的主题，便于用户查找）、Cc（表示应给某人发送一个邮件副本）、From和Date（分别表示发件人的电子邮件地址和发件日期）、Reply-To（对方回信所用的地址）</strong></li>
</ul>
<h2 id="2-5-4邮件读取协议POP3和IMAP4"><a href="#2-5-4邮件读取协议POP3和IMAP4" class="headerlink" title="2.5.4邮件读取协议POP3和IMAP4"></a>2.5.4邮件读取协议POP3和IMAP4</h2><ul>
<li>邮局协议POP是一个非常简单但功能有限的邮件读取协议，POP3是它的第三个版本，也是当前使用的版本。</li>
<li>POP也使用<strong>客户-服务器</strong>的工作方式，在接收邮件的用户PC机中必须运行POP客户程序，而在用户所连接的互联网服务提供商(Internet Service Provider,ISP)的邮件服务器中运行POP服务器程序</li>
<li>交互邮件访问协议IMAP也使用<strong>客户-服务器</strong>的工作方式，IMAP4是它的第四个版本，也是当前使用的版本。</li>
<li>用户在自己的PC机上就可以操纵ISP的邮件服务器的邮箱，就像在本地操纵一样</li>
<li><strong>IMAP是一个联机协议</strong>，当用户PC机上的IMAP客户程序打开IMAP服务器的邮箱时，用户就可看到邮件的首部，若用户需要打开某个邮件，则邮件才传到用户的PC机上</li>
<li>IMAP的优势<ul>
<li>用户可以在不同的地方使用不同的计算机随时上网阅读和处理的自己的邮件</li>
<li>IMAP允许收件人只读取邮件中的某一个部分</li>
</ul>
</li>
<li>IMAP的缺点：如果用户没有将邮件复制到自己的PC上，则邮件一直是存放在IMAP服务器上，因此用户需要经常与IMAP服务器建立连接</li>
</ul>
<h2 id="2-5-5基于万维网的电子邮件"><a href="#2-5-5基于万维网的电子邮件" class="headerlink" title="2.5.5基于万维网的电子邮件"></a>2.5.5基于万维网的电子邮件</h2><ul>
<li>发件方使用<strong>HTTP协议</strong>将邮件发送到邮件服务器，两个服务器之间的传送使用SMTP协议，邮件从服务器传到收件方是使用HTTP协议</li>
<li>万维网电子邮件的优势：只要能够找到可以上网的PC机，打开任何一种浏览器都可以方便地<strong>收发</strong>电子邮件，是一种“B-S”的方式（浏览器-服务器），而上述所提到的SMTP\POP3\IMAP都是“C-S”的方式（客户-服务器）</li>
</ul>
<h2 id="2-5-6通用互联网邮件扩充MIME"><a href="#2-5-6通用互联网邮件扩充MIME" class="headerlink" title="2.5.6通用互联网邮件扩充MIME"></a>2.5.6通用互联网邮件扩充MIME</h2><ul>
<li>由于SMTP能够传送的文件格式有限，因此MIME继续使用RFC822格式的同时增加了<strong>邮件主体的结构</strong>，定义了<strong>传送非ASCII码的编码规则</strong>，但<strong>MIME并没有改动SMTP或取代它</strong></li>
<li>MIME和SMTP的关系：邮件（非ASCII码）先通过MIME转换成7位ASCII码，再使用SMTP传输，然后通过MIME转回非ASCII码交给用户<br><img src="../photos/ComputerNetworkCourse/2_2.png" title="MIME和SMTP关系示意图"></li>
<li>MIME的三个主要部分<ul>
<li>首部字段：添加了5个新的首部字段，它们可包含在RFC822首部中，这些字段提供了有关邮件主体的信息</li>
<li>格式：定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化</li>
<li>传送编码：定义了新的传送编码，可对任何内容格式进行转换，而不会被邮件系统改变</li>
</ul>
</li>
</ul>
<hr>
<h1 id="2-6-动态主机配置协议DHCP（课程略）"><a href="#2-6-动态主机配置协议DHCP（课程略）" class="headerlink" title="2.6 动态主机配置协议DHCP（课程略）"></a>2.6 动态主机配置协议DHCP（课程略）</h1><h1 id="2-7-简单网络管理协议SNMP（课程略）"><a href="#2-7-简单网络管理协议SNMP（课程略）" class="headerlink" title="2.7 简单网络管理协议SNMP（课程略）"></a>2.7 简单网络管理协议SNMP（课程略）</h1><hr>
<h1 id="2-8-应用进程跨越网络的通信"><a href="#2-8-应用进程跨越网络的通信" class="headerlink" title="2.8 应用进程跨越网络的通信"></a>2.8 应用进程跨越网络的通信</h1><h2 id="2-8-1系统调用和应用编程接口"><a href="#2-8-1系统调用和应用编程接口" class="headerlink" title="2.8.1系统调用和应用编程接口"></a>2.8.1系统调用和应用编程接口</h2><ul>
<li>大多数操作系统使用系统调用的机制在应用程序和操作系统间传递控制权</li>
<li>系统调用和程序中的函数调用较为相似，只是系统调用是将控制权传递给操作系统，而函数调用的控制权是在调用函数的那部分代码 </li>
</ul>
<h2 id="2-8-2几种常用的系统调用"><a href="#2-8-2几种常用的系统调用" class="headerlink" title="2.8.2几种常用的系统调用"></a>2.8.2几种常用的系统调用</h2><ul>
<li>应用编程接口API——应用进程和操作系统控制权进行转换的接口：当某个应用进程启动系统调用时，控制权就从应用进程传递给了系统调用接口，此接口再将控制权传递给计算机的操作系统，操作系统将此调用转给某个内部进程，并执行所请求的操作，内部过程一旦执行完毕，控制权又通过系统调用接口返回给应用进程<ul>
<li>套接字接口</li>
<li>Windows Socket：采用套接字接口但稍有不同</li>
<li>TLI，为UNIX系统定义的一种API</li>
</ul>
</li>
<li><strong>套接字 <em>（IP地址+端口）</em>的作用**：当应用进程需要使用网络进行通信的时候就发出系统调用，请求操作系统为其创建套接字，以便把网络通信所需要的系统资源分配给该应用进程，操作系统为这些资源的综合用一个叫做</strong>套接字描述符**的号码来表示，并把此号码返回给应用进程，应用进程所进行的网络操作都必须使用这个号码。通信完毕后，应用进程通过一个关闭套接字的系统调用通知操作系统回收与该号码相关的所有资源</li>
</ul>
<hr>
<h1 id="2-9-P2P应用"><a href="#2-9-P2P应用" class="headerlink" title="2.9 P2P应用"></a>2.9 P2P应用</h1><h2 id="2-9-0P2P工作方式概述"><a href="#2-9-0P2P工作方式概述" class="headerlink" title="2.9.0P2P工作方式概述"></a>2.9.0P2P工作方式概述</h2><ul>
<li>P2P出现的背景：自从互联网能够提供音频、视频服务后，宽带上网用户数量急剧增长，很多用户使用宽带接入的目的就是更快地下载音频视频文件</li>
<li>P2P工作方式：所有的音频、视频文件都是在普通的互联网用户之间传输，<strong>每个客户也可以是服务器</strong>，在P2P工作方式下，相当于有很多分散在各地的媒体服务器提供下载服务</li>
<li>在互联网流量中，P2P工作方式下的文件分发已占据最大的份额，比万维网应用所占的比例要大得多</li>
<li>优点：用户不必访问集中式服务器，缓解了集中式媒体服务器可能出现的瓶颈问题，多个用户拥有相同资源使得可以获得的资源来源更多，获取资源更为方便、快捷<h2 id="2-9-1具有集中目录服务器的P2P工作方式"><a href="#2-9-1具有集中目录服务器的P2P工作方式" class="headerlink" title="2.9.1具有集中目录服务器的P2P工作方式"></a>2.9.1具有集中目录服务器的P2P工作方式</h2></li>
<li>Napster<ul>
<li>是最早出现的P2P技术，用于提供MP3音乐的免费下载</li>
<li>Napster能够搜索音乐文件，所有的音乐<strong>文件地址</strong>击中存放在一个Napster目录服务器中，便于用户下载</li>
<li>用户要及时向Napster的目录服务器报告自己存有的音乐文件，当用户需要下载时，就向服务器发出询问，服务器根据检索结果返回地址，Napster<strong>文件传输是分散的，但文件的定位是集中的</strong></li>
<li>缺点：可靠性差（需要目录服务器）、侵犯版权</li>
</ul>
</li>
</ul>
<h2 id="2-9-2具有全分布式结构的P2P文件共享程序"><a href="#2-9-2具有全分布式结构的P2P文件共享程序" class="headerlink" title="2.9.2具有全分布式结构的P2P文件共享程序"></a>2.9.2具有全分布式结构的P2P文件共享程序</h2><ul>
<li>电驴eMule<ul>
<li>电驴使用<strong>分散定位和分散传输技术</strong>，把每一个文件划分为许多小文件块，使用<strong>多源文件传输协议MFTP</strong>进行传送。因此用户可以同时从很多地方<strong>并行下载一个文件中的不同文件块</strong>，这么做使得下载可以较快完成</li>
<li>电驴用户在下载文件的同时也在上传文件</li>
</ul>
</li>
<li>比特洪流BT**<del>种子！</del><strong>：BitTorrent所有对等方集合称为一个</strong>洪流<strong>，下载文件的数据单元为</strong>长度固定的文件块<strong>，基础设施节点则叫做</strong>追踪器**，用于获得对等方列表</li>
</ul>
<h2 id="2-9-3P2P文件分发的分析"><a href="#2-9-3P2P文件分发的分析" class="headerlink" title="2.9.3P2P文件分发的分析"></a>2.9.3P2P文件分发的分析</h2><ul>
<li>使用P2P方式下载文件会<strong>同时占用下载和上传带宽</strong></li>
<li>C/S方式下分发的最短时间<ul>
<li>从服务器端考虑，有N台主机从服务器下载一个大文件，所有主机分发完毕的最短时间T不可能小于NF/u（？为啥），其中F为文件大小，单位为bit；上传速率和下载速率分别为u和d，单位为bit/s</li>
<li>若下载速率最慢的主机的下载速率为dmin，则T不可能小于F/dmin</li>
<li>综上可知所有主机都下载完文件F的最少时间为T=max（NF/u，F/dmin）</li>
</ul>
</li>
</ul>
<h2 id="2-9-4在P2P对等方式中搜索对象"><a href="#2-9-4在P2P对等方式中搜索对象" class="headerlink" title="2.9.4在P2P对等方式中搜索对象"></a>2.9.4在P2P对等方式中搜索对象</h2><ul>
<li>现在广泛使用的索引和查找技术叫做<strong>分布式散列表DHT</strong>，也可译为<strong>分布式哈希表</strong>，它是由大量对等方共同维护的散列表</li>
<li>分布式散列表DHT利用散列函数，把资源名K及其存放的结点IP地址N都分别映射为资源名标识符KID和节点标识符NID</li>
<li>chord算法把结点按标识符数值从小到大沿顺时针排列成一个环形覆盖网络</li>
</ul>
<hr>
<h2 id="2-10补充"><a href="#2-10补充" class="headerlink" title="2.10补充"></a>2.10补充</h2> 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyright： </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2022/02/25/%E8%AE%A1%E7%BD%91%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B02/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" rel="tag">课程笔记</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2022/03/03/VR%E5%BC%80%E5%8F%91%E6%97%A5%E8%AE%B01/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            UnityVR学习笔记1：准备工作
          
        </div>
      </a>
    
    
      <a href="/2022/02/25/%E4%BD%BF%E7%94%A8git%E6%9B%B4%E6%96%B0%E5%8D%9A%E5%AE%A2%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">使用git bash更新博客遇到的问题与解决方案</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "",
    app_key: "",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2022
        <i class="ri-heart-fill heart_icon"></i> Daniel Qi
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer.svg" alt="Welcome to DanielQi&#39;s Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/photos/">相册</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2022/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/1.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/2.png">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="86"
        src="//music.163.com/outchain/player?type=2&id=139774&auto=0&height=66"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>